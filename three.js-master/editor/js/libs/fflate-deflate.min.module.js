/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
Subset included: synchronous deflate, synchronous zip
*/
"use strict";var r=Uint8Array,n=Uint16Array,e=Uint32Array,t=new r([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),f=new r([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new r([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(r,t){for(var f=new n(31),a=0;a<31;++a)f[a]=t+=1<<r[a-1];var o=new e(f[30]);for(a=1;a<30;++a)for(var v=f[a];v<f[a+1];++v)o[v]=v-f[a]<<5|a;return[f,o]},v=o(t,2),i=v[0],u=v[1];i[28]=258,u[258]=28;for(var l=o(f,0),c=(l[0],l[1]),s=new n(32768),h=0;h<32768;++h){var g=(43690&h)>>>1|(21845&h)<<1;g=(61680&(g=(52428&g)>>>2|(13107&g)<<2))>>>4|(3855&g)<<4,s[h]=((65280&g)>>>8|(255&g)<<8)>>>1}var w=function(r,e,t){for(var f=r.length,a=0,o=new n(e);a<f;++a)++o[r[a]-1];var v,i=new n(e);for(a=0;a<e;++a)i[a]=i[a-1]+o[a-1]<<1;if(t){v=new n(1<<e);var u=15-e;for(a=0;a<f;++a)if(r[a])for(var l=a<<4|r[a],c=e-r[a],h=i[r[a]-1]++<<c,g=h|(1<<c)-1;h<=g;++h)v[s[h]>>>u]=l}else for(v=new n(f),a=0;a<f;++a)v[a]=s[i[r[a]-1]++]>>>15-r[a];return v},d=new r(288);for(h=0;h<144;++h)d[h]=8;for(h=144;h<256;++h)d[h]=9;for(h=256;h<280;++h)d[h]=7;for(h=280;h<288;++h)d[h]=8;var m=new r(32);for(h=0;h<32;++h)m[h]=5;var p=w(d,9,0),y=w(m,5,0),M=function(r){return(r/8>>0)+(7&r&&1)},b=function(r,n,e){e<<=7&n;var t=n/8>>0;r[t]|=e,r[t+1]|=e>>>8},x=function(r,n,e){e<<=7&n;var t=n/8>>0;r[t]|=e,r[t+1]|=e>>>8,r[t+2]|=e>>>16},A=function(e,t){for(var f=[],a=0;a<e.length;++a)e[a]&&f.push({s:a,f:e[a]});var o=f.length,v=f.slice();if(!o)return[new r(0),0];if(1==o){var i=new r(f[0].s+1);return i[f[0].s]=1,[i,1]}f.sort((function(r,n){return r.f-n.f})),f.push({s:-1,f:25001});var u=f[0],l=f[1],c=0,s=1,h=2;for(f[0]={s:-1,f:u.f+l.f,l:u,r:l};s!=o-1;)u=f[f[c].f<f[h].f?c++:h++],l=f[c!=s&&f[c].f<f[h].f?c++:h++],f[s++]={s:-1,f:u.f+l.f,l:u,r:l};var g=v[0].s;for(a=1;a<o;++a)v[a].s>g&&(g=v[a].s);var w=new n(g+1),d=U(f[s-1],w,0);if(d>t){a=0;var m=0,p=d-t,y=1<<p;for(v.sort((function(r,n){return w[n.s]-w[r.s]||r.f-n.f}));a<o;++a){var M=v[a].s;if(!(w[M]>t))break;m+=y-(1<<d-w[M]),w[M]=t}for(m>>>=p;m>0;){var b=v[a].s;w[b]<t?m-=1<<t-w[b]++-1:++a}for(;a>=0&&m;--a){var x=v[a].s;w[x]==t&&(--w[x],++m)}d=t}return[new r(w),d]},U=function(r,n,e){return-1==r.s?Math.max(U(r.l,n,e+1),U(r.r,n,e+1)):n[r.s]=e},D=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new n(++e),f=0,a=r[0],o=1,v=function(r){t[f++]=r},i=1;i<=e;++i)if(r[i]==a&&i!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)v(32754);o>2&&(v(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(v(a),--o;o>6;o-=6)v(8304);o>2&&(v(o-3<<5|8208),o=0)}for(;o--;)v(a);o=1,a=r[i]}return[t.subarray(0,f),e]},S=function(r,n){for(var e=0,t=0;t<n.length;++t)e+=r[t]*n[t];return e},T=function(r,n,e){var t=e.length,f=M(n+2);r[f]=255&t,r[f+1]=t>>>8,r[f+2]=255^r[f],r[f+3]=255^r[f+1];for(var a=0;a<t;++a)r[f+a+4]=e[a];return 8*(f+4+t)},k=function(r,e,o,v,i,u,l,c,s,h,g){b(e,g++,o),++i[256];for(var M=A(i,15),U=M[0],k=M[1],z=A(u,15),C=z[0],E=z[1],F=D(U),H=F[0],Y=F[1],j=D(C),q=j[0],B=j[1],G=new n(19),I=0;I<H.length;++I)G[31&H[I]]++;for(I=0;I<q.length;++I)G[31&q[I]]++;for(var J=A(G,7),K=J[0],L=J[1],N=19;N>4&&!K[a[N-1]];--N);var O,P,Q,R,V=h+5<<3,W=S(i,d)+S(u,m)+l,X=S(i,U)+S(u,C)+l+14+3*N+S(G,K)+(2*G[16]+3*G[17]+7*G[18]);if(V<=W&&V<=X)return T(e,g,r.subarray(s,s+h));if(b(e,g,1+(X<W)),g+=2,X<W){O=w(U,k,0),P=U,Q=w(C,E,0),R=C;var Z=w(K,L,0);for(b(e,g,Y-257),b(e,g+5,B-1),b(e,g+10,N-4),g+=14,I=0;I<N;++I)b(e,g+3*I,K[a[I]]);g+=3*N;for(var $=[H,q],_=0;_<2;++_){var rr=$[_];for(I=0;I<rr.length;++I){var nr=31&rr[I];b(e,g,Z[nr]),g+=K[nr],nr>15&&(b(e,g,rr[I]>>>5&127),g+=rr[I]>>>12)}}}else O=p,P=d,Q=y,R=m;for(I=0;I<c;++I)if(v[I]>255){nr=v[I]>>>18&31,x(e,g,O[nr+257]),g+=P[nr+257],nr>7&&(b(e,g,v[I]>>>23&31),g+=t[nr]);var er=31&v[I];x(e,g,Q[er]),g+=R[er],er>3&&(x(e,g,v[I]>>>5&8191),g+=f[er])}else x(e,g,O[v[I]]),g+=P[v[I]];return x(e,g,O[256]),g+P[256]},z=new e([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),C=new r(0),E=function(a,o,v,i,l,s){var h=a.length,g=new r(i+h+5*(1+Math.floor(h/7e3))+l),w=g.subarray(i,g.length-l),d=0;if(!o||h<8)for(var m=0;m<=h;m+=65535){var p=m+65535;p<h?d=T(w,d,a.subarray(m,p)):(w[m]=s,d=T(w,d,a.subarray(m,h)))}else{for(var y=z[o-1],b=y>>>13,x=8191&y,A=(1<<v)-1,U=new n(32768),D=new n(A+1),S=Math.ceil(v/3),E=2*S,F=function(r){return(a[r]^a[r+1]<<S^a[r+2]<<E)&A},H=new e(25e3),Y=new n(288),j=new n(32),q=0,B=0,G=(m=0,0),I=0,J=0;m<h;++m){var K=F(m),L=32767&m,N=D[K];if(U[L]=N,D[K]=L,I<=m){var O=h-m;if((q>7e3||G>24576)&&O>423){d=k(a,w,0,H,Y,j,B,G,J,m-J,d),G=q=B=0,J=m;for(var P=0;P<286;++P)Y[P]=0;for(P=0;P<30;++P)j[P]=0}var Q=2,R=0,V=x,W=L-N&32767;if(O>2&&K==F(m-W))for(var X=Math.min(b,O)-1,Z=Math.min(32767,m),$=Math.min(258,O);W<=Z&&--V&&L!=N;){if(a[m+Q]==a[m+Q-W]){for(var _=0;_<$&&a[m+_]==a[m+_-W];++_);if(_>Q){if(Q=_,R=W,_>X)break;var rr=Math.min(W,_-2),nr=0;for(P=0;P<rr;++P){var er=m-W+P+32768&32767,tr=er-U[er]+32768&32767;tr>nr&&(nr=tr,N=er)}}}W+=(L=N)-(N=U[L])+32768&32767}if(R){H[G++]=268435456|u[Q]<<18|c[R];var fr=31&u[Q],ar=31&c[R];B+=t[fr]+f[ar],++Y[257+fr],++j[ar],I=m+Q,++q}else H[G++]=a[m],++Y[a[m]]}}d=k(a,w,s,H,Y,j,B,G,J,m-J,d),s||(d=T(w,d,C))}return function(t,f,a){(null==f||f<0)&&(f=0),(null==a||a>t.length)&&(a=t.length);var o=new(t instanceof n?n:t instanceof e?e:r)(a-f);return o.set(t.subarray(f,a)),o}(g,0,i+M(d)+l)},F=function(r,n,e,t,f){return E(r,null==n.level?6:n.level,null==n.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(r.length)))):12+n.mem,e,t,!f)},H=function(r,n,e){for(;e;++n)r[n]=e,e>>>=8};export var zlibSync=function(r,n){void 0===n&&(n={});var e=function(){var r=1,n=0;return{p:function(e){for(var t=r,f=n,a=e.length,o=0;o!=a;){for(var v=Math.min(o+5552,a);o<v;++o)f+=t+=e[o];t%=65521,f%=65521}r=t,n=f},d:function(){return(r>>>8<<16|(255&n)<<8|n>>>8)+2*((255&r)<<23)}}}();e.p(r);var t=F(r,n,2,4);return function(r,n){var e=n.level,t=0==e?0:e<6?1:9==e?3:2;r[0]=120,r[1]=t<<6|(t?32-2*t:1)}(t,n),H(t,t.length-4,e.d()),t};var Y=function(n,e,t,f){for(var a in n){var o=n[a],v=e+a;o instanceof r?t[v]=[o,f]:Array.isArray(o)?t[v]=[o[0],mrg(f,o[1])]:Y(o,v+"/",t,f)}};function j(n,e){var t=n.length;if(!e&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(n);for(var f=new r(n.length+(n.length>>>1)),a=0,o=function(r){f[a++]=r},v=0;v<t;++v){if(a+5>f.length){var i=new r(a+8+(t-v<<1));i.set(f),f=i}var u=n.charCodeAt(v);u<128||e?o(u):u<2048?(o(192|u>>>6),o(128|63&u)):u>55295&&u<57344?(o(240|(u=65536+(1047552&u)|1023&n.charCodeAt(++v))>>>18),o(128|u>>>12&63),o(128|u>>>6&63),o(128|63&u)):(o(224|u>>>12),o(128|u>>>6&63),o(128|63&u))}return slc(f,0,a)}export var strToU8=j;for(var q=function(r,n,e,t,f,a,o,v,i,u){var l=a.length,c=t.length;H(r,n,null!=i?33639248:67324752),n+=4,null!=i&&(r[n]=20,n+=2),r[n]=20,n+=2,r[n++]=8==u&&(1==v.level?6:v.level<6?4:9==v.level?2:0),r[n++]=o&&8,r[n]=u,n+=2;var s=new Date(v.mtime||Date.now()),h=s.getFullYear()-1980;if(h<0||h>119)throw"date not in range 1980-2099";H(r,n,2*(h<<24)|s.getMonth()+1<<21|s.getDate()<<16|s.getHours()<<11|s.getMinutes()<<5|s.getSeconds()>>>1),H(r,n+=4,e),H(r,n+4,c),H(r,n+8,f),H(r,n+12,l),n+=16,null!=i&&(H(r,n+=10,i),n+=4),r.set(a,n),n+=l,null==i&&r.set(t,n)},B=new e(256),G=0;G<256;++G){for(var I=G,J=9;--J;)I=(1&I&&3988292384)^I>>>1;B[G]=I}var K=function(){var r=4294967295;return{p:function(n){for(var e=r,t=0;t<n.length;++t)e=B[255&e^n[t]]^e>>>8;r=e},d:function(){return 4294967295^r}}};export var zipSync=function(n,e){void 0===e&&(e={});var t={},f=[];Y(n,"",t,e);var a=0,o=0;for(var v in t){var i=t[v],u=i[0],l=i[1],c=0==l.level?0:8,s=j(v),h=s.length;if(s.length>65535)throw"filename too long";var g=c?F(u,l,0,0):u,w=g.length,d=K();d.p(u),f.push({t:c,d:g,m:u.length,c:d.d(),u:v.length!=h,n:s,o:a,p:l}),a+=30+h+w,o+=76+2*h+w}for(var m=new r(o+22),p=a,y=o-a,M=0;M<f.length;++M){var b=f[M];q(m,b.o,b.c,b.d,b.m,b.n,b.u,b.p,null,b.t),q(m,a,b.c,b.d,b.m,b.n,b.u,b.p,b.o,b.t),a+=46+b.n.length}return function(r,n,e,t,f){H(r,n,101010256),H(r,n+8,e),H(r,n+10,e),H(r,n+12,t),H(r,n+16,f)}(m,a,f.length,y,p),m}
